##
title = "Testing Routes"
url = "/cms/route/cars/:query?*"
layout = "default"

[kitchenSink kSink]
defaultView = "0"
==
<?
function onStart()
{
    $this->page->test_page_var = 'foobar';
}

function onFilterCars()
{
    Flash::success('This came from the page');
}
?>
==
<div class="container">
    <h1>Testing Routes</h1>
    <p>You arrived at <b>{{ this.request.url }}</b></p>
    <p>The query param is: <strong>{{ this.param.query|default }}</strong></p>
    <p>
        <a
            href="#"
            data-request-flash
            onclick="$(this).request('onFilterCars'); return false;">
            Test Page AJAX
        </a>
    </p>
    <p>
        <a
            href="#"
            onclick="$(this).request('kSink::onFilterCars', { flash: true }); return false;">
            Test Component AJAX
        </a>
    </p>
    <hr />
    <h2>Safe Mode Tests</h2>
    <p>
        Custom page variable: {{ this.page.test_page_var }}
    </p>
    <p>
        {{ this.session.get('any_item') }}
    </p>
    <hr />
    <p>
        pageUrl is blocked:
        {# Breaks Security Policy use 'index'|page instead #}
        {# {{ this.controller.pageUrl('index') }} #}
    </p>
</div>
